\chapter{Convergence of Matrix Moments}
\section{Convergence in Expectation}

%%%% BEGIN -- PAUL'S PART
%%%%
%%%%
\begin{lemma}[Matrix Powers Entries]
    \label{lem:matrix_powers_entries}
    \notready
    Let $Y$ be an $n\times n$ matrix and $k \in \mathbb{N}$. Then, for each  $(i, j)$-th entry of $Y^{k}$, we have:
    $$
    (Y^{k})_{ij} = \sum_{1 \leq i_2, \ldots ,i_{k} \leq n} Y_{ii_{2}} Y_{i_{2}i_{3}}\ldots Y_{i_{k}j}
    $$
\end{lemma}

\begin{proof}
\notready
We proceed by induction on $k$.

Our base case is $k=1$, then:
$$
Y_n^1 = Y_n \quad \Rightarrow \quad [Y_n^1]_{ij} = Y_{ij},
$$
which matches the formula since the summation over zero indices just gives the term $Y_{ij}$.

Our inductive step is to assume that the formula holds for some $k \ge 1$, i.e.,
$$
\left[Y_n^k\right]_{ij} = \sum_{1 \le i_2, \dots, i_k \le n} Y_{i i_2} Y_{i_2 i_3} \cdots Y_{i_k j}.
$$

We must show that it holds for $k + 1$. Note that:
\begin{align*}
\left[Y_n^{k+1}\right]_{ij}
&= \sum_{\ell = 1}^n \left[Y_n^k\right]_{i\ell} Y_{\ell j} \\
&= \sum_{\ell = 1}^n \left( \sum_{1 \le i_2, \dots, i_k \le n} Y_{i i_2} Y_{i_2 i_3} \cdots Y_{i_k \ell} \right) Y_{\ell j} \\
&= \sum_{1 \le i_2, \dots, i_k, i_{k+1} \le n} Y_{i i_2} Y_{i_2 i_3} \cdots Y_{i_k i_{k+1}} Y_{i_{k+1} j}.
\end{align*}

Thus, the formula holds for $k + 1$.

By induction, the result holds for all $k \ge 1$.
\end{proof}

\begin{lemma}[Matrix Powers Trace]
    \label{lem:matrix_powers_trace}
    \notready
    \uses{lem:matrix_powers_entries}
    Let $Y$ be an $n\times n$ matrix and $k \in \mathbb{N}$. Then, the trace of $Y^{k}$ is given by:
    $$
    \Tr[Y^{k}] = \sum_{1 \leq i_1, i_2, \ldots, i_k \leq n} Y_{i_1 i_2} Y_{i_2 i_3} \cdots Y_{i_k i_1}.
    $$
\end{lemma}

\begin{proof}
\notready
We can use the result from Lemma \ref{lem:matrix_powers_entries} to compute the trace of $Y^k$:
\begin{align*}
&\Tr[Y^{k}] = \sum_{i=1}^{n} (Y^{k})_{ii} = \sum_{i=1}^{n} (\sum_{1\leq i_{2}, \ldots i_{k} \leq n} Y_{i i_{2}} Y_{i_{2}i_{3}} \ldots Y_{i_{k} i}) \\
&= \sum_{1\leq i_{1}, i_{2}, \ldots, i_{k} \leq n} Y_{i_{1} i_{2}} Y_{i_{2} i_{3}} \ldots Y_{i_{k} i_{1}}.
\end{align*}

\end{proof}

\begin{definition}[Graphs from Multi Index]
    \label{def:graph_multi_index}
    \notready
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. A graph $G_{\mathbf{i}}$ is defined as follows: the vertices $V_{\mathbf{i}}$ are the distinct elements of
    $$\left\{i_1, i_2, \ldots, i_k\right\},$$
     and the edges $E_{\mathbf{i}}$ are the distinct pairs among
    $$\left\{i_1, i_2\right\},\left\{i_2, i_3\right\}, \ldots,\left\{i_{k-1}, i_k\right\},\left\{i_k, i_1\right\}.$$
\end{definition}

\begin{definition}[Definition 4.2 in \cite{Kemp2013RMTNotes}]
  \label{def:graph_path}
  \notready
  \uses{def:graph_multi_index}
  Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. the path $w_{\mathbf{i}}$ is the sequence
$$
w_{\mathbf{i}}=\left(\left\{i_1, i_2\right\},\left\{i_2, i_3\right\}, \ldots,\left\{i_{k-1}, i_k\right\},\left\{i_k, i_1\right\}\right)
$$
of edges from $E_{\mathbf{i}}$
\end{definition}

\begin{definition}[Graph Edge Count]
    \label{def:graph_edge_count}
    \notready
    \uses{def:graph_multi_index, def:graph_path}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. For any edge $e=\{i,j\}$ from $E_{\mathbf{i}}$, we define the edge count $w_{\mathbf{i}}(e)$ as the number of times each edge $e$ is traversed, and if $(i, j) \notin E_{\mathbf{i}}$, then $w_{\mathbf{i}}(\{i, j\}) = 0$.
\end{definition}

\begin{definition}[Matrix Multi Index]
    \label{def:matrix_multi_index}
    \notready
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. Let $Y$ be a symmetric matrix. The matrix multi index $Y_{\mathbf{i}}$ is defined as:
    $$
    Y_{\mathbf{i}} = Y_{i_{1}i_{2}} Y_{i_{2}i_{3}} \ldots Y_{i_{k}i_{1}}
    $$
\end{definition}

\begin{lemma}[Matrix Multi Index and Graph Equivalence]
    \label{lem:multi_index_graph_equivalence}
    \notready
    \uses{def:matrix_multi_index, def:graph_path}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. Let $Y$ be a symmetric matrix. Then, we have the following:
     $$
     Y_{\mathbf{i}} = Y_{i_{1}i_{2}} Y_{i_{2}i_{3}} \ldots Y_{i_{k}i_{1}} = \prod_{w \in w_{\mathbf{i}}} Y_{w}
    $$
\end{lemma}

\begin{proof}
\notready
    We see from definition $\ref{def:graph_path}$ that the path is defined as:
    $$
    w_{\mathbf{i}} = (\{i_{1}, i_{2}\}, \{i_{2}, i_{3}\}, \ldots, \{i_{k-1}, i_{k}\}, \{i_{k}, i_{1}\}).
    $$
    if we use each each edge $w \in w_{\mathbf{i}}$, due to symmetry, we can write the product:
    $$
    \prod_{w\in w_{\mathbf{i}}} Y_{w} = Y_{\{i_{1}, i_{2}\}} Y_{\{i_{2}, i_{3}\}} \ldots Y_{\{i_{k-1}, i_{k}\}} Y_{\{i_{k}, i_{1}\}} = Y_{i_{1}i_{2}} Y_{i_{2}i_{3}} \ldots Y_{i_{k}i_{1}} = Y_{\mathbf{i}}
    $$
    as required.
\end{proof}

\begin{lemma}[Graph Walk and Graph Count Equivalence]
    \label{lem:graph_walk_count_equivalence}
    \notready
    \uses{def:graph_path, def:graph_edge_count, def:matrix_multi_index, lem:multi_index_graph_equivalence}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. Let $Y$ be a symmetric matrix. Then, we have the following:
     $$
     Y_{\mathbf{i}} = \prod_{w \in w_{\mathbf{i}}} Y_{w} = \prod_{1 \leq i \leq j \leq n} Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}.
    $$
\end{lemma}

\begin{proof}
\notready
Using lemma \ref{lem:multi_index_graph_equivalence}, we already have that $Y_{\mathbf{i}} = \prod_{w \in w_{\mathbf{i}}} Y_{w}$. We consider the following cases for each $(i, j)$:\\\\
\textbf{$(i, j) \notin w_{\mathbf{i}}$}: In this case, the entry $Y_{ij}^{w_{\mathbf{i}}(\{i, j\})} = 1$, making no contribution to the product. \\\\
\textbf{$(i, j) \in w_{\mathbf{i}}$}: In this case, the entry $Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}$ is equal to the number of times the unordered edge $\{i, j\}$ appears in the path $w_{\mathbf{i}}$. \\\\
These two cover all possibilities, so putting them together we obtain
$$
Y_{\mathbf i}
      \;=\;
      \prod_{1\le i\le j\le n}
          Y_{ij}^{\,w_{\mathbf i}(\{i,j\})}.
$$
Indeed, if $(i,j)\notin w_{\mathbf i}$ then $w_{\mathbf i}(\{i,j\})=0$ and the corresponding factor contributes $Y_{ij}^{0}=1$, and if $(i,j)\in w_{\mathbf i}$ (hence also $(j,i)$ if $j<i$), the exponent $w_{\mathbf i}(\{i,j\})$ counts exactly how many times the unordered edge $\{i,j\}$ appears in the walk, so the factor is $Y_{ij}^{\,w_{\mathbf i}(\{i,j\})}$.

Because every unordered pair $\{i,j\}$ with $1\le i\le j\le n$ is covered by one of these two cases and the product lists each edge exactly once.
\end{proof}

\begin{definition}[Self Edges]
    \label{def:graph_self_edges}
    \notready
    \uses{def:graph_multi_index}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index. Given graph $G_{\mathbf{i}}$, define the self-edges $E_{\mathbf{i}}^{s}$ as:
    $$
    \{\{i, i\} \in E_{\mathbf{i}}\},
    $$
    the set of edges where both vertices are the same.
\end{definition}

\begin{definition}[Connecting Edges]
    \label{def:graph_connecting_edges}
    \notready
    \uses{def:graph_multi_index}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index. Given graph $G_{\mathbf{i}}$, define the connecting-edges $E_{\mathbf{i}}^{c}$ as:
    $$
    \{\{i, j\} \in E_{\mathbf{i}} : i \neq j\}
    $$
\end{definition}

\begin{lemma}[Expectation of Matrix Multi Index]
    \label{lem:expectation_matrix_multi_index}
    \notready
    \uses{def:matrix_multi_index, def:graph_edge_count, def:graph_self_edges, def:graph_connecting_edges}
    Let $\mathbf{i} \in[n]^k$ be a $k$-index, $\mathbf{i}=\left(i_1, i_2, \ldots, i_k\right)$. Let $Y$ be a symmetric matrix and let $\{Y_{ij}\}_{1\le i\le j}$ be independent random variables, with $\{Y_{ii}\}_{i\ge 1}$ identically distributed and $\{Y_{ij}\}_{1\le i<j}$ identically distributed. Then, we have the following:
    $$
    \bE(Y_{\mathbf{i}}) = \prod_{e_s \in E_{\mathbf{i}}^s} \bE(Y_{11}^{w_{\mathbf{i}}(e_s)}) \cdot \prod_{e_c \in E_{\mathbf{i}}^c} \bE(Y_{12}^{w_{\mathbf{i}}(e_c)}).
    $$
\end{lemma}

\begin{proof}
\end{proof}

\begin{lemma}[Trace of Expectation of Matrix]
    \label{lem:trace_expectation_of_matrix}
    \notready
    \uses{lem:expectation_matrix_multi_index, lem:matrix_powers_trace, lem:graph_walk_count_equivalence}
    Let $\mathbf{Y}_{n}$ be an $n \times n$ symmetric matrix with independent entries, where $\{Y_{ij}\}_{1\le i\le j}$ are independent random variables, with $\{Y_{ii}\}_{i\ge 1}$ identically distributed and $\{Y_{ij}\}_{1\le i<j}$ identically distributed. Then, for any $k$-index $\mathbf{i} \in [n]^k$, we have:
    $$
    \bE(\Tr(\mathbf{Y}_{n}^{k})) = \sum_{1 \leq i_1, i_2, \ldots, i_k \leq n} \bE(Y_{i_1 i_2} Y_{i_2 i_3} \cdots Y_{i_k i_1}) = \sum_{\mathbf{i} \in [n]^{k}} \bE(Y_{i})
    $$
\end{lemma}

\begin{proof}
\notready
Because each $Y_{ij}$ is independent, we can write:
$$
\bE(Y_{\mathbf{i}}) = \bE\left(\prod_{1 \leq i \leq j \leq n} Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}\right) = \prod_{1 \leq i \leq j \leq n} \bE(Y_{ij}^{w_{\mathbf{i}}(\{i, j\})})
$$
using lemma \ref{lem:graph_walk_count_equivalence}. Consider the following cases for each $(i, j)$ (we assume each $(i, j) \in w_{\mathbf{i}}$ since if they aren't, then $w_{\mathbf{i}}(i, j) = 0$ and this contributes nothing to the product):\\\\
$\mathbf{i = j}$: in this case, we have $Y_{ij} = Y_{ii}$, and therefore the edge $(i, i) \in E_{\mathbf{i}}^{s}$. Since each $Y_{ii}$ is identically distributed for all $i$, we have:
$$
\bE(Y_{ii}) = \bE(Y_{11})
$$
so the factor in the product above becomes $\bE(Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}) = \bE(Y_{11}^{w_{\mathbf{i}}(i, i)})$.\\\\
$\mathbf{i < j}$: in this case, we have  $Y_{ij} \in E_{\mathbf{i}}^{c}$. Since each non diagonal entry $Y_{ij}$ is identically distributed for all $i \neq j$ (and by symmetry $Y_{ij} = Y_{ji}$), we have:
$$
\bE(Y_{ij}) = \bE(Y_{12})
$$
so the factor in the product above becomes $\bE(Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}) = \bE(Y_{12}^{w_{\mathbf{i}}(i, j)})$.\\\\
Plugging both of these cases into the earlier product over $E_{\mathbf{i}}^{c}$ and $E_{\mathbf{i}}^{s}$, we have:
 $$
 \prod_{1 \leq i \leq j \leq n} \bE(Y_{ij}^{w_{\mathbf{i}}(\{i, j\})}) = \prod_{e_s \in E_{\mathbf{i}}^s} \bE(Y_{11}^{w_{\mathbf{i}}(e_s)}) \cdot \prod_{e_c \in E_{\mathbf{i}}^c} \bE(Y_{12}^{w_{\mathbf{i}}(e_c)})
$$
as required.

\end{proof}

\begin{definition}[Product of Expectation of Matrix Multi Index]
    \label{def:prod_expectation_matrix_multi_index}
    \notready
    \uses{def:matrix_multi_index, def:graph_edge_count, def:graph_self_edges, def:graph_connecting_edges, def:graph_multi_index, def:graph_path}
    Let $\mathbf{i} \in [n]^{k}$ be a $k$-index, $\mathbf{i} = (i_1, i_2, \ldots, i_{k})$. Let $Y$ be a symmetric matrix and let $\{Y_{ij}\}_{1\le i\le j}$ be independent random variables, with $\{Y_{ii}\}_{i\ge 1}$ identically distributed and $\{Y_{ij}\}_{1\le i<j}$ identically distributed. We define $\Pi(G_{\mathbf{i}}), w_{\mathbf{i}}$ as follows:
    $$
    \Pi (G_{\mathbf{i}}, w_{\mathbf{i}}) = \prod_{e_s \in E_{\mathbf{i}}^s} \bE(Y_{11}^{w_{\mathbf{i}}(e_s)}) \cdot \prod_{e_c \in E_{\mathbf{i}}^c} \bE(Y_{12}^{w_{\mathbf{i}}(e_c)}) = \bE(Y_{\mathbf{i}}).
    $$
\end{definition}

%%%% END -- PAUL'S PART
%%%%
%%%%
%%%%


%---Richard's Part for Proposition 4.1 (Updated) (Start)---% 
%---------% 
%---------% 
\begin{definition}[Length $|w_\mathbf{i}|$ : R-1-1 : def:length\_of\_w\_i]
  \label{def:length_of_w_i}
  \uses{def:graph_path}
  % We use the definition of the walk $w_\mathbf{i}$.
  Given a path $w_\mathbf{i}$ generated by some $k$-index $\mathbf{i}$, we let $|w_\mathbf{i}|$ denote the length of $w_\mathbf{i}$. 
\end{definition}
%---------% 
%---------% 
%\begin{definition}[Edge Counting Function $w_\mathbf{i}(\cdot)$ : R-1-*]
  % Paul's section might already have this definition.
%  \label{def:edge_counting_function_w}
%  \uses{def:graph_multi_index,def:graph_path}
  % We use the definition of the walk $w_\mathbf{i}$ and also the definition of the edge set $E_\mathbf{i}$ of the graph $G_\mathbf{i}$.
%  Given a graph $G_\mathbf{i} = (V_\mathbf{i},E_\mathbf{i})$ and a path $w_\mathbf{i}$ generated by some $k$-index $\mathbf{i}$, we let $w_\mathbf{i}(e)$ denote the number of times the edge $e \in E_\mathbf{i}$ is traversed by the path $w_\mathbf{i}$. 
%\end{definition}
%---------% 
%---------% 
\begin{lemma}[$|w_\mathbf{i}| = k$ : R-1-2 : lem:abs\_w\_i\_eq\_k]
  \label{lem:abs_w_i_eq_k}
  \uses{def:graph_multi_index,def:length_of_w_i,def:graph_edge_count}
  % We use the definition of the graph $G_\mathbf{i}$, "Length of $|w_\mathbf{i}", and "Edge Counting Function $w_\mathbf{i}(\cdot)$".
  For any $k$-index $\mathbf{i}$, the connected graph $G_\mathbf{i} = (V_\mathbf{i},E_\mathbf{i})$ has at most $k$ vertices. Furthermore
  \[
  |w_\mathbf{i}| \equiv \sum_{e \in E_\mathbf{i}} w_\mathbf{i}(e) = k.
  \]
\end{lemma}
\begin{proof}
  Foremost, since the number of vertices of the graph $G_\mathbf{i}$ 
  are the number of distinct elements of the $k$-index $\mathbf{i}$, it clearly follows that $\#V_\mathbf{i} \leq k$.
  On the other hand, recall that each $w_i(e)$ denotes the number of times the edge $e \in E_\mathbf{i}$ is traversed by the path $w_\mathbf{i}$. 
  Since $|w_\mathbf{i}| = k$ by the construction of $w_\mathbf{i}$, it follows that
  \[
  |w_\mathbf{i}| \equiv \sum_{e \in E_\mathbf{i}} w_\mathbf{i}(e) = k.
  \]
\end{proof}
%---------%
%---------%
% Motivated by these conditions, we define $\mathcal{G}_k$:
%---------% 
%---------% 
\begin{definition}[Length $|w|$ : R-1-3 : def:length\_of\_w]
  \label{def:length_of_w}
  \uses{}
  % We use the definition of an arbitrary path $w$.
  Given any graph $G=(V,E)$ and a path $w$, we let $|w|$ denote the length of $w$. 
\end{definition}
%---------% 
%---------% 
\begin{definition}[$\mathcal{G}_k$ : R-1-4 : def:g\_k]
  \label{def:g_k}
  \uses{def:length_of_w}
  Let $\mathcal{G}_k$ denote the set of all ordered pairs $(G,w)$ where $G = (V,E)$ is a connected graph with at most $k$ vertices, and
  $w$ is a closed path covering $G$ satisfying $|w| = k$.
\end{definition}
%---------%
%---------%
% We can count the set of $k$-indexes in Equation \ref{* *}: 
% For any $(G,w) \in \mathcal{G}_k$, an index with that corresponding graph $G$ and walk $w$ is completely determined by assigning which distinct values of $[n]$ appear at the vertices of $G$:
%---------%
%---------%
% The definition below proposes an alternate definition of $\mathcal{G}_k$ along with the equivalence relation. 
%\begin{definition}
%  \label{def:g_k}
%  \notready
%  \uses{}
%  %We propose an alternate (and perhaps more explicit) construction of $\mathcal{G}_k$. 
%  We define $\mathcal{G}_k$ as the set of equivalence classes of the set $\{ (G_\mathbf{i},w_\mathbf{i}) : \mathbf{i} \in [n]^k \text{ and } n \in \mathbb{N} \}$, 
%  where the equivalence relation is defined as: $(G_\mathbf{i},w_\mathbf{i}) \sim (G_{\mathbf{i}^*},w_{\mathbf{i}^*})$ 
%  if and only if there exists a bijection $\varphi$ from the set of entries $\mathbf{i}$ onto the set of entries $\mathbf{i}^*$ such that
%  \[
%  \mathbf{i} = (i_1,...,i_k) \,\, \Longleftrightarrow \,\, \mathbf{i}^* = \bigl( \varphi(i_1),\varphi(i_2),...,\varphi(i_k) \bigl).
%  \]
%  We denote an element of $\mathcal{G}_k$ as $(G,w)$.
%\end{definition}
%---------%
%---------%
\begin{lemma}[$w$ can be uniquely expressed : R-1-5-0 : def:w\_unique]
  \label{lem:w_unique}
  \uses{def:g_k}
  Given $(G,w) \in \mathcal{G}_k$, let us denote the path $w$ by
  \[
  w = (\{i_1,i_2\},\{i_3,i_4\},...,\{i_{2k-3},i_{2k-2}\},\{i_{2k-1},i_{2k}\}).
  \] 
  Then we can choose the smallest integer appearing in $\{i_1,i_2\} \cap \{i_{2k-1},i_{2k}\}$ such that $w$ takes the form
  \begin{equation}\label{equation_w_unique}
  w = (\{j_1,j_2\},\{j_2,j_3\},...,\{j_{k-1},j_k\},\{j_k,j_1\}).
  \end{equation} 
\end{lemma}
\begin{proof}
  There is at least one way and at most two ways to express $w$ in the form of Equation \ref{equation_w_unique}.
  This follows from the fact that detemining the first entry $j_1$ (for which we have two choices of $i_1$ or $i_2$) of a path completely determines the remaining entries $j_2,j_3,...,j_k$. 
  Note that this also implies that we can not express express $w$ in two `distinct' forms of Equation \ref{equation_w_unique} by starting with the same choice of $j_1$.
% If there is only one way to express $w$ in the form of Equation \ref{equation_w_unique}, then there is nothing to prove.
% If there are two ways to express $w$ in the form of Equation \ref{equation_w_unique}, then we can simply choose the smaller choice of $j_1$.
\end{proof}
%---------%
%---------%
\begin{definition}[$k$-index generated by $(G,w)$ : R-1-5 : def:g\_k\_j]
  \label{def:g_k_j}
  \uses{def:g_k,lem:w_unique}
  % We also utilize the the well-ordering of natural numbers.
  % We might also utilize the notion of a directed path.
  Given $(G,w) \in \mathcal{G}_k$, we denote $\mathbf{j}$ as the $k$-index generated by $(G,w)$ in the following way. 
  The path $w$ can be uniquely expressed under the condition of Lemma \ref{lem:w_unique}:
  \[
  w = (\{j_1,j_2\},\{j_2,j_3\},...,\{j_{k-1},j_k\},\{j_k,j_1\}).
  \] 
  We define $\mathbf{j} = (j_1,j_2,...,j_{k-1},j_k)$.
\end{definition}
%---------%
%---------%
\begin{definition}[$(G_\mathbf{i},w_\mathbf{i}) = (G,w)$ : R-1-6 : def:g\_k\_equiv]
  \label{def:g_k_equiv}
  \uses{def:graph_multi_index,def:graph_path,def:g_k,def:g_k_j}
  Let $(G_\mathbf{i},w_\mathbf{i})$ be an ordered pair generated by some $k$-index $\mathbf{i}$ and $(G,w) \in \mathcal{G}_k$.
  We say $(G_\mathbf{i},w_\mathbf{i}) = (G,w)$ if and only if there exists a bijection $\varphi$ from the set of entries $\mathbf{i}$ onto the set of entries $\mathbf{j}$ such that
  \[
  \mathbf{i} = (i_1,...,i_k) \,\, \Longleftrightarrow \,\, \mathbf{j} = \bigl( \varphi(i_1),\varphi(i_2),...,\varphi(i_k) \bigl),
  \]
  where $\mathbf{j}$ is a $k$-index generated by $(G,w)$.
\end{definition}
%---------%
%---------%
\begin{lemma}[$\mathbf{i} \sim \mathbf{j} \Rightarrow \mathbb{E}(Y_\mathbf{i}) = \mathbb{E}(Y_\mathbf{j})$ : R-1-7 : lem:eq\_equiv\_eq\_expect]
  \label{lem:eq_equiv_eq_expect}
  \uses{def:matrix_multi_index,lem:expectation_matrix_multi_index}
  Given two $k$-indexes $\mathbf{i} = (i_1,...,i_k)$ and $\mathbf{j} = (j_1,...,j_k)$, 
  suppose there exists a bijection $\varphi$ from the set of entries of $\mathbf{i}$ onto the set of entries of $\mathbf{j}$ such that
  \[
  \mathbf{i} = (i_1,...,i_k) \,\, \Longleftrightarrow \,\, \mathbf{j} = \bigl( \varphi(i_1),\varphi(i_2),...,\varphi(i_k) \bigl).
  \]
  Then $\bE (Y_\mathbf{i}) = \bE (Y_{\mathbf{j}})$.
\end{lemma}
\begin{proof}
  Given $Y_\mathbf{i} = Y_{i_1 i_2}Y_{i_2 i_3} \cdots Y_{i_{k-1} i_k}Y_{i_k i_1}$, we have
  \[
  Y_{\mathbf{j}} = Y_{j_1 j_2}Y_{j_2 j_3} \cdots Y_{j_{k-1} j_k}Y_{j_k j_1} 
  = Y_{\varphi(i_1) \varphi(i_2)}Y_{\varphi(i_2) \varphi(i_3)} \cdots Y_{\varphi(i_{k-1}) \varphi(i_k)}Y_{\varphi(i_k) \varphi(i_1)}.
  \] 
  Observe that $\{ i_{\lambda_l},i_{\lambda_{l+1}} \}$ is a singleton and only if $\{ \varphi(i_{\lambda_l}),\varphi(i_{\lambda_{l+1}}) \}$ is a singleton.
  The fact that $\{ i_{\lambda_l},i_{\lambda_{l+1}} \} = \{ i_{\lambda_\mu},i_{\lambda_{\mu+1}} \}$ if and only if $\{ \varphi(i_{\lambda_l}),\varphi(i_{\lambda_{l+1}}) \} = \{ \varphi(i_{\lambda_\mu}),\varphi(i_{\lambda_{\mu+1}}) \}$ completes the proof.

\end{proof}
%---------%
%---------%
%\begin{lemma}
%  \label{lem:equal_equiv_class_equal_expectation}
%  \notready
%  \uses{}
%  %\uses:
%  %(1)Definition of $Y_\mathbf{i}$, 
%  Given two $k$-indexes $\mathbf{i} = (i_1,...,i_k)$ and $\mathbf{i}^* = (j_1,...,j_k)$, 
%  suppose there exists a bijection $\varphi$ from the set of entries $\mathbf{i}$ onto the set of entries $\mathbf{i}^*$ such that
%  \[
%  \mathbf{i} = (i_1,...,i_k) \,\, \Longleftrightarrow \,\, \mathbf{i}^* = \bigl( \varphi(i_1),\varphi(i_2),...,\varphi(i_k) \bigl).
%  \]
%  Then $\bE (Y_\mathbf{i}) = \bE (Y_{\mathbf{i}^*})$.
%\end{lemma}
%\begin{proof}
%  It suffices to show that $Y_\mathbf{i}$ and $Y_{\mathbf{i}^*}$ represent the same number of, respectively, self-edges and connecting edges.
%  Given $Y_\mathbf{i} = Y_{i_1 i_2}Y_{i_2 i_3} \cdots Y_{i_{k-1} i_k}Y_{i_k i_1}$,
%  \[
%  Y_{\mathbf{i}^*} = Y_{j_1 j_2}Y_{j_2 j_3} \cdots Y_{j_{k-1} j_k}Y_{j_k j_1} 
%  = Y_{\varphi(i_1) \varphi(i_2)}Y_{\varphi(i_2) \varphi(i_3)} \cdots Y_{\varphi(i_{k-1}) \varphi(i_k)}Y_{\varphi(i_k) \varphi(i_1)}.
%  \] 
%  The fact that $\{ i_{\lambda_l},i_{\lambda_{l+1}} \}$ is a self-edge 
%  if (i.e. a singleton) and only if $\{ \varphi(i_{\lambda_l}),\varphi(i_{\lambda_{l+1}}) \}$ is a self-edge completes the proof.
%\end{proof}
%---------%
%---------%
\begin{definition}[$|G|$ : R-1-8 : def:abs.G]
  \label{def:abs.G}
  \uses{def:g_k}
  Given an ordered pair $(G,w) \in \mathcal{G}_k$, we define $|G|$ to be the number of distinct vertices in the graph $G$.
\end{definition}
%---------%
%---------%
\begin{lemma}[Lemma 4.3 in \cite{Kemp2013RMTNotes} : R-1-9 : lem:lem\_4.3]
  \label{lem:lem_4.3}
  \uses{def:g_k,def:graph_multi_index,def:graph_path,def:g_k_equiv,lem:eq_equiv_eq_expect}
  Given $(G,w) \in \mathcal{G}_k$, we have
  \[
  \# \{ \mathbf{i} \in [n]^k : (G_\mathbf{i},w_\mathbf{i}) = (G,w) \} = n (n-1) \cdots (n - |G| + 1).
  \]
\end{lemma}
\begin{proof}
  By the way the equivalence relation is defined in Definition \ref{def:g_k}, 
  the fact that there are $n (n - 1) \cdots (n -|G| + 1)$ ways to assign $|G|$ distinct values from $[n]$ into the indices $i_1,...,i_{|G|}$ completes the proof.
\end{proof}
%---------%
% Using Equation \ref{* *}, we can re-index the sum of Equation \ref{* *} as
%---------%
\begin{lemma}[Partitioning into double summation : R-1-10 : lem:equation\_4.5\_1]
  \label{lem:equation_4.5_1}
  \uses{def:g_k,def:g_k_equiv,lem:trace_expectation_of_matrix}
  \[
  \bE \Tr (\mathbf{Y}_\mathbf{i}^k) = \sum_{(G,w) \in \mathcal{G}_k} \sum_{\substack{\mathbf{i} \in [n]^k \\ (G_\mathbf{i},w_\mathbf{i}) = (G,w)}} \bE (Y_\mathbf{i}).
  \]
\end{lemma}
\begin{proof}
  This follows from `partitioning' the summation appearing in Lemma \ref{lem:trace_expectation_of_matrix} using the equivalence relation defined in Definition \ref{def:g_k_equiv}.
\end{proof}
%---------%
%---------%
\begin{definition}[$\Pi (G,w)$: R-1-11 : def:Pi.G.w]
  \label{def:Pi.G.w}
  \uses{def:g_k,def:g_k_j}
  Given an ordered pair $(G,w) \in \mathcal{G}_k$, let $\mathbf{j}$ be the $k$-index generated by $(G,w)$. We define 
  \[
  \Pi (G,w) = \mathbb{E}(Y_\mathbf{j}).
  \]
\end{definition}
%---------%
%---------%
\begin{lemma}[Re-indexing the sum with counting argument : R-1-12 : lem:equation\_4.5\_2]
  \label{lem:equation_4.5_2}
  \uses{lem:equation_4.5_1,lem:eq_equiv_eq_expect,lem:lem_4.3,def:Pi.G.w}
  \[
  \bE \Tr (\mathbf{Y}_\mathbf{i}^k) = \sum_{(G,w) \in \mathcal{G}_k} \Pi (G,w) \cdot \# \{ \mathbf{i} \in [n]^k : (G_\mathbf{i},w_\mathbf{i}) = (G,w) \}.
  \]
\end{lemma}
\begin{proof}
  This follows from re-indexing the sum of Lemma \ref{lem:equation_4.5_1} by using Lemma \ref{lem:eq_equiv_eq_expect} and Lemma \ref{lem:lem_4.3}.
\end{proof}
%---------%
%---------%
\begin{lemma}[Re-introducing the renormalization factor : R-1-13 : lem:equation\_4.5\_3]
  \label{lem:equation_4.5_3}
  \uses{lem:equation_4.5_2}
  \[
  \frac{1}{n} \bE \Tr (\mathbf{X}_n^k) = \sum_{(G,w) \in \mathcal{G}_k} \Pi (G,w) \cdot \frac{n (n-1) \cdots (n - |G| + 1)}{n^{k/2+1}}.
  \]
\end{lemma}
\begin{proof}
  Combining with the renormalization factor $n^{-1}$ of Proposition \ref{???} gives
  \[
  \frac{1}{n} \bE \Tr (\mathbf{X}_n^k) = \frac{1}{n^{k/2+1}} \bE \Tr (\mathbf{Y}_\mathbf{i}^k).
  \]
  Substituting the term $\bE \Tr (\mathbf{Y}_\mathbf{i}^k)$ with the expression in Equation \ref{lem:equation_4.5_2} gives
  \[
  \frac{1}{n} \bE \Tr (\mathbf{X}_n^k) = \sum_{\substack{(G,w) \in \mathcal{G}_k}} \Pi (G,w) \cdot \frac{n (n-1) \cdots (n - |G| + 1)}{n^{k/2+1}}.
  \]
\end{proof}
% Note that the summation is finite, and thus we only need to determine the values of $\Pi (G,w)$ to evaluate the summation. 
%---------%
%---------%
\begin{definition}[$\mathcal{G}_{k, w \geq 2}$ : R-1-14 : def:g\_k\_ge\_2]
  \label{def:g_k_ge_2}
  \uses{def:g_k,def:graph_path}
  Let $\mathcal{G}_{k,w \geq 2}$ be a subset of $\mathcal{G}_k$ in which the walk $w$ traverses each edge at least twice.
\end{definition}
%---------%
%\begin{definition}
%  \label{def:g_k_ge_2}
%  \uses{def:g_k}
%  Given an equivalence class $(G,w) \in \mathcal{G}_k$, 
%  let $\substack{\mathcal{G}_k \\ w \geq 2}$ be a subset of $\mathcal{G}_k$ 
%  in which the walk $w_\mathbf{i}$ represetned by every $(G_\mathbf{i},w_\mathbf{i}) \in (G,w)$ 
%  crosses each edge at least twice.
%\end{definition}
%---------%
%\begin{definition}
%  \label{def:Pi.graph}
%  \uses{def:g_k}
%  %uses the definition of $\Pi (G_\mathbf{i},w_\mathbf{i})$.
%  Given an equivalence class $(G,w) \in \mathcal{G}_k$, let 
%  \[
%  \Pi (G,w) = \Pi (G_\mathbf{i},w_\mathbf{i})
%  \]
%  where $(G_\mathbf{i},w_\mathbf{i}) \in (G,w)$.
%\end{definition}
%---------%
%\begin{lemma}
%  \label{lem:g_k_ge_2_wd}
%  \uses{def:g_k_ge_2,lem:equal_equiv_class_equal_expectation}
%  The set $\substack{\mathcal{G}_k \\ w \geq 2}$ in Definition \ref{def:g_k_ge_2} is well-defined.
%  Furthermore, the common value $\Pi (G,w)$ in Definition \ref{def:Pi.graph} is well-defined.  
%\end{lemma}
%\begin{proof}
%  The proof for both statements follows an identical reasoning as in the proof of Lemma \ref{lem:equal_equiv_class_equal_expectation}.
%\end{proof}
%---------%
%---------%
\begin{lemma}[$\Pi (G,w) = 0$ : R-1-15 : lem:Pi.prod\_eq\_zero\_if\_w\_le\_two]
  \label{lem:Pi.prod_eq_zero_if_w_le_two}
  \uses{def:g_k,def:prod_expectation_matrix_multi_index,def:length_of_w_i,def:g_k_j}
  Given an ordered pair $(G,w) \in \mathcal{G}_k$, suppose there exists an edge $e \in E$ in which it is traversed only once in the walk $w$. Then
  \[
  \Pi (G,w) = 0.
  \]
\end{lemma}
\begin{proof}
  Let $(G,w) \in \mathcal{G}_k$ and let $\mathbf{j}$ be the $k$-index generated by $(G,w)$. Suppose there exists an edge $e \in E_\mathbf{j}$ such that $w_\mathbf{j}(e) = 1$.
  This means, in Lemma \ref{lem:expectation_matrix_multi_index}, a singleton term $\bE (Y_{ij}^{w_\mathbf{j}(e)}) = \bE (Y_{ij})$ appears.
  The rest of the proof follows from the assumption of Proposition \ref{???} that $\bE (Y_{ij}) = 0$ for every $i$ and $j$. 
\end{proof}
%---------%
%\begin{lemma}
%  \label{lem:Pi.prod_eq_zero_if_w_le_two}
%  \uses{def:g_k,prop:matrix_moments_convergence}
%  %uses definition of $Y_\mathbf{i}$ AND $\Pi (G,w)$.
%  Given an ordered pair $(G_\mathbf{i},w_\mathbf{i})$, suppose there exists an edge $e \in E_\mathbf{i}$ in which it is traversed only once in the walk $w_\mathbf{i}$.
%  Then
%  \[
%  \Pi (G,w) = 0.
%  \]
%\end{lemma}
%\begin{proof}
%  This directly follows from the assumption of Proposition \ref{prop:matrix_moments_convergence} that $\bE (Y_{ij}) = 0$ for every $i$ and $j$. 
%\end{proof}
%---------%
%---------%
\begin{lemma}[Simplifying the summation with the fact $\Pi (G,w) = 0$ in certain cases: R-1-16 : lem:equation\_4.8]
  \label{lem:equation_4.8}
  \uses{def:g_k_ge_2,lem:equation_4.5_3,lem:Pi.prod_eq_zero_if_w_le_two}
  \[
  \frac{1}{n} \bE \Tr (\mathbf{X}_n^k) 
  = \sum_{(G,w) \in \mathcal{G}_{k, w \geq 2}} \Pi (G,w) \cdot \frac{n (n-1) \cdots (n - |G| + 1)}{n^{k/2+1}}.
  \]

\end{lemma}
\begin{proof}
  This follows from applying the result of Lemma \ref{lem:Pi.prod_eq_zero_if_w_le_two} to Lemma \ref{lem:equation_4.5_3}.
\end{proof}
%---------%
%---------%
\begin{lemma}[$\#E \leq k/2$ : R-1-17 : lem:edge\_set\_order\_leq\_k\_over\_two]
  \label{lem:edge_set_order_leq_k_over_two}
  \uses{def:g_k_ge_2, lem:abs_w_i_eq_k}
  Given an ordered pair $(G,w) \in \mathcal{G}_{k,w \geq 2}$, we must have $\# E \leq k/2$.
\end{lemma}
\begin{proof}
  Since $|w| = k$, if each edge in $G$ is traversed at least twice, then by construction of $w$ the number of edges is at most $k/2$.
\end{proof}
%---------%
% This lemma might be merged with the following one(s).
% If using the equivalence definition of $\mathcal{G}_k$, it might be more convenient to introduce the Axiom of Choice to ease the notation on $(G,w)$.
%---------%
%---Richard's Part for Proposition 4.1 (Updated) (End)---% 







% kiran's part below
\begin{proposition}%[Exercise 4.3.1 in \cite{Kemp2013RMTNotes}]
  \label{prop:vertex_edge_inequality}
  \notready
  %\uses{}
  Let $G=(V,E)$ be a connected finite graph. Then, $|G|=\#V\le \#E+1$.
\end{proposition}

\begin{proof}
  \notready
  $|G|= \#V\le \#E+1$: proof by induction on $\#V$. Base case $\#V = 1$ is obvious. For each additional vertex, the number of edges must increase by at least one for the graph to remain connected.
\end{proof}

\begin{proposition}
  \label{prop:vertex_edge_tree_equality}
  \notready
  Let $G=(V,E)$ be a connected finite graph. Then, $|G|=\#V=\#E+1$ if and only if $G$ is a plane tree.
  \uses{prop:vertex_edge_inequality}
\end{proposition}

\begin{proof}
  \notready
  $|G|=\#V=\#E+1$ if $G$ is a plane tree is already in Lean: SimpleGraph.IsTree.card\_edgeFinset.

  $G$ is a plane tree if $|G|=\#V=\#E+1$: proof by induction on $\#V$. Base case $\#V = 1$ has no edges. Assume $\#V = \#E + 1$ for $\#V = k$. Now, consider a tree with $\#V = k+1$ nodes. Removing a leaf node leaves us with a tree with $\#V = k$ nodes. By IH, there are $k - 1$ edges. So including the leaf node gives us $k$ edges.
\end{proof}


\begin{lemma}
  \label{lem:vertex_bound}
  \notready
  \uses{prop:vertex_edge_inequality, lem:edge_set_order_leq_k_over_two}
  For any graph $G = (V, E)$ appearing in the sum in Equation 4.8, $|G| \le k/2 + 1$.
\end{lemma}

\begin{proof}
  \notready
  Follows directly from earlier lemmas (replacing $\#E$ with $k/2$).
\end{proof}



\begin{lemma}
  \label{lem:asc_factorial_product}
  \notready
  $n(n-1)\cdots (n-|G|+1) \le n^{|G|}$.

\end{lemma}

\begin{proof}
  \notready
  Use Nat.ascFactorial\_eq\_div. Or prove directly.
\end{proof}



\begin{lemma}
  \label{lem:bounded_map}
  \notready
  \uses{lem:asc_factorial_product, lem:vertex_bound, lem:equation_4.8}
  The sequence $n\mapsto \frac1n\bE\Tr(X_n^k)$ is bounded.
\end{lemma}


\begin{proof}
  \notready
  The only part that depends on $n$ is the big fraction. Since we only care about $w \ge 2$, $|G| \le k/2 + 1$. Use the fact that the product $n(n-1)\cdots (n-|G|+1)$ is asymptotically equal to $n^{|G|}$ to conclude that the fraction is bounded and doesn't explode.
\end{proof}

\begin{lemma}
  \label{lem:odd_vertex_bound}
  \notready
  \uses{lem:vertex_bound}
  Suppose $k$ odd. Then, $|G| \le \frac{k}{2} + \frac{1}{2}$.
\end{lemma}

\begin{proof}
  \notready
  %prove
\end{proof}

\begin{lemma}
  \label{lem:odd_ratio_bound}
  \notready
  \uses{lem:odd_vertex_bound, lem:asc_factorial_product}
  Suppose $k$ odd. Then, $\frac{n(n-1)\cdots(n-|G|+1)}{n^{k/2+1}} \le \frac{1}{\sqrt{n}}$.
\end{lemma}

\begin{proof}
  \notready
  %prove
\end{proof}




\begin{proposition}
  \label{prop:odd_case}
  \notready
  \uses{lem:odd_ratio_bound, lem:equation_4.8}
  Suppose $k$ odd. Then, $\lim_{n\to\infty} \frac{1}{n}\bE\Tr(X_n^k) = 0$.
\end{proposition}

\begin{proof}
  \notready
  Since $|G|\le \#E+1 \le k/2+1$ and $|G|$ is an integer, it follows that $|G|\le (k-1)/2+1 = k/2 + 1/2$.  Hence, in this case, all the terms in the (finite $n$-independent) sum in Equation 4.8 are $O(n^{-1/2})$
\end{proof}

\begin{lemma}
  \label{lem:edge_bound_large_w}
  \notready
  %\uses{}
  If $k$ is even and there exists $e$ such that $w(e) \ge 3$, then $\#E \le \frac{k-1}{2}$.
\end{lemma}

\begin{proof}
  \notready
  %proof
\end{proof}



\begin{proposition}%[Proposition 4.4 in \cite{Kemp2013RMTNotes}]
  \label{prop:g_bound_self_edge}
  \notready
  \uses{prop:vertex_edge_inequality, prop:vertex_edge_inequality, lem:edge_set_order_leq_k_over_two, def:g_k}
  Let $(G,w)\in\mathcal{G}_k$ with $w\ge 2$, and suppose $k$ is even. If there exists a self-edge $e\in E_s$ in $G$, then $|G|\le k/2$.
\end{proposition}

\begin{proof}
  \notready
  Since the graph $G = (V,E)$ contains a loop, it is not a tree; it follows from Exercise \ref{ex V < E+1} that $\#V < \#E+1$.  But $w\ge 2$ implies that $\#E\le k/2$, and so $\#V < k/2+1$, and so $|G| = \#V \le k/2$.
\end{proof}

\begin{proposition}%[Proposition 4.4 in \cite{Kemp2013RMTNotes}]
  \label{prop:g_bound_large_w}
  \notready
  \uses{prop:vertex_edge_inequality, prop:vertex_edge_tree_equality, lem:edge_bound_large_w}
  Let $(G,w)\in\mathcal{G}_k$ with $w\ge 2$, and suppose $k$ is even. If there exists an edge $e$ in $G$ with $w(e)\ge 3$, then $|G|\le k/2$.
\end{proposition}

\begin{proof}
  \notready
  The sum of $w$ over all edges $E$ in $G$ is $k$.  Hence, the sum of $w$ over $E\setminus\{e\}$ is $\le k-3$.  Since $w\ge 2$, this means that the number of edges excepting $e$ is $\le (k-3)/2$; hence, $\#E \le (k-3)/2+1 = (k-1)/2$.  By the result of a previous lemma, this means that $\#V \le (k-1)/2+1 = (k+1)/2$.  Since $k$ is even, it follows that $|G|=\#V \le k/2$.
\end{proof}




\begin{definition}
  \label{def:special_set_g}
  \notready
  \uses{def:g_k}
  Let $\mathcal{G}^{k/2+1}_k$ to be the set of pairs $(G,w)\in\mathcal{G}_k$ where $G$ has $k/2+1$ vertices, contains no self-edges, and the walk $w$ crosses every edge exactly $2$ times.
\end{definition}


\begin{lemma}
  \label{lem:graph_set_finite}
  \notready
  \uses{def:g_k}
  $|G_k|$ is finite.
\end{lemma}

\begin{proof}
  \notready
  Follows from definition.
\end{proof}


\begin{lemma}
  \label{lem:special_g_tree}
  \notready
  \uses{def:special_set_g, lem:special_g_edge_count, prop:vertex_edge_tree_equality}
  Elements of $G_k^{k/2+1}$ are trees.
\end{lemma}

\begin{proof}
  \notready
  %proof
\end{proof}

\begin{lemma}
  \label{lem:special_g_edge_count}
  \notready
  \uses{def:special_set_g, prop:g_bound_large_w}
  Elements of $G_k^{k/2+1}$ have $|E| = k/2$.
\end{lemma}

\begin{proof}
  \notready
  %proof
\end{proof}

\iffalse
\begin{lemma}
  \label{lem:special_g_vertex_count}
  \notready
  \uses{def:special_set_g, lem:special_g_edge_count, lem:special_set_g, prop:vertex_edge_tree_equality}
  Elements of $G_k^{k/2+1}$ have $|V| = k/2 + 1$.
\end{lemma}

\begin{proof}
  \notready
  Follows directly from dependency graph.
\end{proof}
\fi



\begin{proposition}
  \label{prop:g_difference_bound}
  \notready
  \uses{lem:graph_set_finite, def:special_set_g, lem:asc_factorial_product}
  $|\sum_{\mathcal{G}_{k}, w \ge 2} - \sum_{\mathcal{G}_k^{k/2+1}}| \le |\mathcal{G}_k|/n$.
\end{proposition}

\begin{proof}
  \notready
  %proof
\end{proof}



\begin{proposition}%[Equation 4.9 in \cite{Kemp2013RMTNotes}]
  \label{prop:trace_ev_special_g}
  \notready
  \uses{prop:g_difference_bound, lem:equation_4.8}
  $\frac1n\bE\Tr(X_n^k) = \sum_{(G,w)\in\mathcal{G}^{k/2+1}_k} \Pi(G,w) \cdot \frac{n(n-1)\cdots(n-|G|+1)}{n^{k/2+1}} + O_k(n^{-1})$
  %edit: remove big O notation
\end{proposition}

\begin{proof}
  \notready
  If $|G| < k/2 + 1$, then there is at least one more $n$ in the denominator than the numerator.
\end{proof}

\begin{proposition}
  \label{lem:fraction_limit_one}
  \notready
  \uses{lem:asc_factorial_product} %uses some lower bound stuff? might need to do more
  $\lim_{n\to\infty}\frac{n^{k/2}}{n(n-1)\cdots(n-k/2+1)} = 1$.
\end{proposition}

\begin{proof}
  \notready
  %proof
  some lower bound stuff + other stuff?
\end{proof}


\begin{proposition}
  \label{prop:trace_ev_limit_equals_sum}
  \notready
  \uses{def:special_set_g, lem:fraction_limit_one, prop:trace_ev_special_g, lem:bounded_map}
  $\lim_{n\to\infty}\bE\Tr(X_n^k) = \sum_{(G,w)\in\mathcal{G}^{k/2+1}_k} \Pi(G,w)$
\end{proposition}

\begin{proof}
  \notready
  Proof: use the fact that $|G|=k/2+1$ and $n(n-1)\cdots(n-k/2+1) \sim n^{k/2+1}$. Limit as n approaches infinity of $O(n^{-1/2})$ is 0.
\end{proof}


\begin{lemma}
  \label{lem:prod_expansion}
  \notready
  \uses{def:special_set_g, def:prod_expectation_matrix_multi_index}
  $\Pi(G,w) = \prod_{e_c\in E^c} \bE(Y_{12}^{w(e_c)})$
\end{lemma}

\begin{proof}
  \notready
  Follows directly.
\end{proof}

\begin{lemma}
  \label{lem:w_2_case}
  \notready
  \uses{def:special_set_g, prop:g_bound_self_edge}
  $\prod_{e_c\in E^c} \bE(Y_{12}^{w(e_c)}) = \prod_{e_c\in E^c} \bE(Y_{12}^2)$
\end{lemma}

\begin{proof}
  \notready
  Follows directly.
\end{proof}

\begin{lemma}
  \label{lem:def_t_rewrite}
  \notready
  \uses{def:special_set_g} %also def of t
  $\bE(Y_{12}^2) = t^{\#E}$
\end{lemma}

\begin{proof}
  \notready
  Follows directly.
\end{proof}

\begin{lemma}
  \label{lem:e_equals_k_over_two}
  \notready
  \uses{lea:special_g_edge_count}
  $t^{\#E} = t^{k/2}$
\end{lemma}

\begin{proof}
  \notready
  Follows directly.
\end{proof}



\begin{proposition}%[Equation 4.10 in \cite{Kemp2013RMTNotes}]
  \label{prop:product_g_w_to_exponential}
  \notready
  \uses{lem:prod_expansion, lem:w_2_case, lem:def_t_rewrite, lem:e_equals_k_over_two}
  %\uses{%%lem:special_g_tree, %lem:special_g_edge_count, prop:vertex_edge_tree_equality, prop:g_bound_self_edge, prop:g_bound_large_w, %def:expectation_matrix_multi_index} %uses: prop:matrix_moments_convergence for defn of t (but can replace)
  $\Pi(G,w) = t^{k/2}$.
\end{proposition}

\begin{proof}
  \notready
  Proof slightly outdated.

  Let $(G,w)\in\mathcal{G}^{k/2+1}_k$.  Since $w$ traverses each edge exactly twice, the number of edges in $G$ is $k/2$.  Since the number of vertices is $k/2+1$, Exercise (Prop) 4.3.1 shows that $G$ is a tree.  In particular there are no self-edges (as we saw already in Proposition 4.4).

  1st equality: definition right after equation 4.4 in notes
  2nd equality: proposition 4.4 (w < 3) and previous lemma (w = 1 --> 0)
  3nd equality: definition (from main proposition)
  4th equality: number of edges is k/2.
\end{proof}




\begin{proposition}%[Proposition 4.11 in \cite{Kemp2013RMTNotes}]
  \label{prop:trace_ev_limit_equals_t_special_g}
  \notready
  \uses{prop:trace_ev_limit_equals_sum, prop:product_g_w_to_exponential}
  $\lim_{n\to\infty} \bE\Tr(X_n^k) = t^{k/2}\cdot\#\mathcal{G}_k^{k/2+1}$
\end{proposition}

\begin{proof}
  \notready
  Follows directly from 4.7.5 and 4.8.
\end{proof}

% end of kiran's part


%Haoyan part


\begin{definition}
    \notready
    \label{def:Dyck_paths}
  A Dyck path of length $k$ is a sequence $(d_1,...,d_k) \in \{\pm 1\}^k$ such that their partial sum $\sum_{i=1}^j d_i \geq 0$
  and total sum $\sum_{i = 1}^{k}d_i = 0$. More intuitively, consider a diagonal lattice path from $(0,0)$ to $(k, 0)$ consisting of
  $\frac{k}{2}$ ups and $\frac{k}{2}$ downs such that the path never goes below thw $x$-axis.
\end{definition}


\begin{definition}
    \notready
    \label{def:graph_to_Dyck_map}
    \uses{def:special_set_g}
   Define a map $\phi$ whose input is $(G, w) \in \mathcal{G}^{k/2 + 1}_k$. Then for its output,
   define a sequence $\mathbf{d}=\mathbf{d}(G,w)\in\{+1,-1\}^k$ recursively as follows.
   Let $d_1=+1$.  For $1<j\le k$, if $w_j\notin\{w_1,\ldots,w_{j-1}\}$, set $d_j=+1$; otherwise, set $d_j=-1$; then
   $\mathbf{d}(G,w) = (d_1,\ldots,d_k)$. $\phi((G,w)) = \mathbf{d}(G,w)$
\end{definition}


\begin{lemma}
    \notready
    \label{lem:graph_Dyck_correspondence}
  \uses{def:Dyck_paths, def:graph_to_Dyck_map}
  $\phi((G,w)) = \mathbf{d}(G,w) \subseteq \mathcal{D}_k$, where $\mathcal{D}_k$ denotes the set of Dyck path of order $k$.
  \begin{proof}
    \notready
    set $P_0 = (0,0)$ and $P_j = (j,d_1+\cdots+d_j)$ for $1\le j\le k$; then the piecewise linear path
    connecting $P_0,P_1,\ldots,P_k$ is a lattice path.  Since $(G,w)\in\mathcal{G}_k^2$, each edge appears exactly two times in $w$,
    meaning that the $\pm1$s come in pairs in $\mathbf{d}(G,w)$.  Hence $d_1+\cdots+d_k=0$.  What's more, for any edge $e$,
    the $-1$ assigned to its second appearance in $w$ comes {\em after} the $+1$ corresponding to its first appearance;
    this means that the partial sums $d_1+\cdots+d_j$ are all $\ge 0$.  That is: $\mathbf{d}(G,w)$ is a Dyck path
  \end{proof}
\end{lemma}


\begin{definition}
    \notready
    \label{def:Dyck_to_graph_map}
   Define a map $\psi$ whose input is a Dyck path of order $k$: $\mathbf{d} \in \{\pm1\}^k$. Then the output is viewing
  this Dyck path as a contour reversal of a tree where an up ($d_i = 1$) corresponds to visiting a child node
  and a down ($d_i = -1$) corresponds to returning to parent node.
\end{definition}


\begin{lemma}
    \notready
    \label{lem:Dyck_graph_correspondence}
  \uses{def:Dyck_paths, def:Dyck_to_graph_map}
  $\psi(\mathbf{d}_k) \subseteq \mathcal{G}^{k/2 + 1}_k$
  \begin{proof}
    \notready
    Use induction on the order of Dyck path $k$ which is an even number. Assume $\phi(\mathbf{d}_{k-2})
    \subseteq \mathcal{G}_{k-2}^{k/2 -1}$. In the case of $k$, the last two steps appended to $\mathbf{d}_{k-2}$
    has to be $1$ followed by $-1$ in order for $\mathbf{d}_k$ to be a Dyck path. By induction hypothesis,
    this generates a graph with one extra vertex from the parent node, whose walk traversed at the last two steps of the walk.
  \end{proof}
\end{lemma}


\begin{lemma}
    \notready
    \label{lem:composition1}
  \uses{def:Dyck_to_graph_map, def:graph_to_Dyck_map, lem:Dyck_graph_correspondence}
  $$\phi \circ \psi = id_{\mathcal{D}_k}$$
  \begin{proof}
    \notready
    % \leanok
    Apply $\psi$ to a given Dyck path $\mathbf{d}$ by definition, then apply $\phi$ to get a new sequence
    $\mathbf{d}'$ such that $d_j' = 1$ for new vertex, $-1$ otherwise. For the original Dyck path, the new
    vertex is the up step corresponding to $1$. This implies $\phi$ recovers the original Dyck path.
  \end{proof}
\end{lemma}


\begin{lemma}
    \notready
    \label{lem:composition2}
  \uses{def:Dyck_to_graph_map, def:graph_to_Dyck_map, lem:graph_Dyck_correspondence}
  $$\psi \circ \phi = id_{\mathcal{G}^{k/2 + 1}_k}$$
   \begin{proof}
    \notready
    % \leanok
    The map $\psi$ recovers the graph walk structure of the input from its Dyck path by the definition.
  \end{proof}
\end{lemma}


\begin{lemma}
    \notready
    \label{lem:walk_to_Dyck_paths_bijection}
  \uses{lem:composition1, lem:composition2}
  Let $k$ be even and let $\mathcal{D}_k$ denote the set of Dyck paths of length $k$
  \[ \mathcal{D}_k = \{(d_1,\ldots,d_k)\in\{\pm 1\}\colon \sum_{i=1}^k d_i\ge 0\text{ for }1\le j\le j\text{, and}\sum_{i=1}^kd_i=0\}. \]
  Then $(G,w)\mapsto {d}(G,w)$ is a bijection $\mathcal{G}_k^{k/2+1}\to\mathcal{D}_k$.
  \begin{proof}
    \notready
    obvious from the previous lemmas.
  \end{proof}
\end{lemma}

\begin{definition}
    \notready
    \label{def:Catalan_number}
  %\lean{Combinatorics.Enumerative.Catalan}
  \[C_0 = 1, \quad \text{and for } n \geq 1, \quad C_n = \sum_{k=0}^{n-1} C_k C_{n-1-k}.\]
\end{definition}


\begin{lemma}
    \notready
    \label{lem:binary_tree_Catalan_number}
  \uses{def:Catalan_number}
  \#\{binary trees with $\frac{k}{2}$ vertices\} is given by Catalan number $C_{k / 2}$
  \begin{proof}
    \notready
  \end{proof}
\end{lemma}


\begin{proposition}
    \notready
    \label{prop:Catalan_Dyck_samecardinality}
  \uses{def:Catalan_number, def:Dyck_paths, lem:binary_tree_Catalan_number}
  %\lean{Catalan}
  % \uses{}
  %\lean{Mathlib.Combinatorics.Enumerative.Catalan}
  %\lean{DyckWord.card_dyckWord_semilength_eq_catalan}
  \[|\mathcal{D}_k| = C_{k/2} \] where $|\mathcal{D}_k|$ denotes the number of Dyke paths of length $k$ while
  $C_k$ is the $k$th Catalan number.
  \begin{proof}
    \notready
    Given a binary tree with $k$ nodes, perform preorder traversal: for each internal node visited, write
    an up-step \(U = (1,1)\). For each time return from a child, write a down-step \(D = (1,-1)\).
    Since every internal node has exactly two children, there are \(k/2\) \(U\)'s and \(k/2\) \(D\)'s,
    giving a Dyke path of length \(k\). Conversely, given a Dyck path, $U$ is interpreted as adding new node
    while $D$ is returning to the parent node.
  \end{proof}
\end{proposition}

\begin{proposition}
    \notready
    \label{prop:graph_Catalan_number}
  \uses{prop:Catalan_Dyck_samecardinality, lem:walk_to_Dyck_paths_bijection}
  \[|\mathcal{G}^{k/2 + 1}_k| = C_{k/2}\]
\end{proposition}

%end of Haoyan's part


%% BIG PROPOSITION
%
%
%
%
%
%
%
%


\begin{proposition}[Proposition 4.1 in \cite{Kemp2013RMTNotes}]
  \label{prop:matrix_moments_convergence}
  \notready
  \uses{prop:trace_ev_limit_equals_t_special_g, prop:odd_case, prop:graph_Catalan_number}
  Let $\{Y_{ij}\}_{1\le i\le j}$ be independent random variables, with $\{Y_{ii}\}_{i\ge 1}$ identically distributed and $\{Y_{ij}\}_{1\le i<j}$ identically distributed.  Suppose that $r_k = \max\{\bE(|Y_{11}|^k),\bE(|Y_{12}|^k)\} <\infty$ for each $k\in\bN$.  Suppose further than $\bE(Y_{ij})=0$ for all $i,j$ and set $t=\bE(Y_{12}^2)$.  If $i>j$, define $Y_{ij} \equiv Y_{ji}$, and let $\mathbf{Y}_n$ be the $n\times n$ matrix with $[\mathbf{Y}_n]_{ij} = Y_{ij}$ for $1\le i,j\le n$.  Let $\mathbf{X}_n = n^{-1/2}\mathbf{Y}_n$ be the corresponding Wigner matrix.  Then
\[
\lim_{n\to\infty} \frac{1}{n}\bE\Tr(\mathbf{X}_n^k) = \begin{cases}
  t^{k/2}C_{k/2}, & k\text{ even} \\
  0, & k\text{ odd}
\end{cases}.
\]
\end{proposition}

\begin{proof}
\notready
\end{proof}




\section{Convergence in Probability}

%---Paul's Part for Proposition 4.5 (Start)---% 
%---------%
%---------%

\begin{lemma}[Variance Trace Expansion]
    \label{lem:variance_expansion}
    \uses{lem:trace_expectation_of_matrix}
    \notready
    Let $\mathbf{Y}_{n}$ be an $n \times n$ symmetric matrix with independent entries, where $\{Y_{ij}\}_{1\le i\le j}$ are independent random variables, with $\{Y_{ii}\}_{i\ge 1}$ identically distributed and $\{Y_{ij}\}_{1\le i<j}$ identically distributed, and let $\mathbf{X}_{n} = n^{-1 / 2}\mathbf{Y}_{n}$ be the corresponding Wigner matrix. Then:
    $$
    \operatorname{Var}\left(\frac{1}{n}\Tr(\mathbf{X}_{n}^{k})\right) = \frac{1}{n^{k+2}} \sum_{\mathbf{i}, \mathbf{j} \in [n]^{k}} [\bE(Y_{\mathbf{i}} Y_{\mathbf{j}}) - \bE(Y_{\mathbf{i}})\bE(Y_{\mathbf{j}})]
    $$ 
\end{lemma}

\begin{proof}
    \notready
    Expanding the variance by definition, we get:
    $$
    \operatorname{Var}\left(\frac{1}{n}\Tr(\mathbf{X}_{n}^{k})\right) = \bE[\frac{1}{n} \cdot \frac{1}{n^{\frac{k}{2}}} \Tr(\mathbf{Y}_{n}^{k})]^2 - (\bE[\frac{1}{n}\cdot \frac{1}{n^{\frac{k}{2}}} \Tr(\mathbf{Y})_{n}^{k}])^2
    $$ 
    use the linearity of expectation to factor out $\frac{1}{n^{k+2}}$ from both expectations:
    $$
    \bE[\frac{1}{n} \cdot \frac{1}{n^{\frac{k}{2}}} \Tr(\mathbf{Y}_{n}^{k})]^2 - (\bE[\frac{1}{n}\cdot \frac{1}{n^{\frac{k}{2}}} \Tr(\mathbf{Y})_{n}^{k}])^2 = \frac{1}{n^{k+2}} \{\bE[\operatorname{Tr}(\mathbf{Y}_{n}^{k})]^2 - (\bE \operatorname{Tr}(\mathbf{Y}_{n}^{k}))^2\}
    $$ 
    using \ref{lem:trace_expectation_of_matrix}, we can expand and square:
\end{proof}


\begin{definition}[Graph Union]
    \label{def:graph_union}
    \notready
    \uses{def:graph_multi_index}
    Given $k$-indices $\mathbf{i} = (i_1, i_2, \cdots , i_{k}), \mathbf{j} = (j_1, j_2, \cdots , j_{k}) \in [n]^{k}$, and Graphs $G_{\mathbf{i}}, G_{\mathbf{j}}$, we define the graph union $G_{\mathbf{i} \# \mathbf{j}}$ as follows:
    $$
    G_{\mathbf{i} \# \mathbf{j}}  = G_{\mathbf{i}} \cup G_{\mathbf{j}} = (V_{\mathbf{i}} \cup V_{\mathbf{j}}, E_{\mathbf{i}} \cup E_{\mathbf{j}})
    $$
\end{definition}


\begin{definition}[Ordered Triple]
    \label{def:ordered_triple}
    \notready
    \uses{def:graph_union, def:graph_path}
    Given $k$-indices $\mathbf{i} = (i_1, i_2, \cdots , i_{k}), \mathbf{j} = (j_1, j_2, \cdots , j_{k}) \in [n]^{k}$, we define the ordered triple $(G_{\mathbf{i} \# \mathbf{j}}, w_{\mathbf{i}}, w_{\mathbf{j}})$ as follows:
    \begin{itemize}
        \item $G_{\mathbf{i} \# \mathbf{j}}$ is the graph union of the graphs defined by $\mathbf{i}$ and $\mathbf{j}$ from definition \ref{def:graph_union}
        \item $w_{\mathbf{i}}$ is the closed walk defined by $\mathbf{i}$ from definition \ref{def:graph_path}
        \item $w_{\mathbf{i}}$ is the closed walk defined by $\mathbf{j}$ from definition \ref{def:graph_path}
    \end{itemize}
\end{definition}

%---------%
%---------%
%---Paul's Part for Proposition 4.5 (End)---% 



%---Richard's Part for Proposition 4.5 (Start)---% 
%---------%
%---------%
\begin{definition}[R-2-1 : def:common\_val\_prod\_of]
  \notready
  \label{def:common_val_prod_of}
  \uses{def:matrix_multi_index,def:ordered_triple} 
  Given an ordered triple $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j})$ generated by two $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, we define
  \[
  \pi(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = \mathbb{E}(Y_\mathbf{i} Y_\mathbf{j}) - \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}).
  \]
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-2 : def:graph\_walk\_triple\_set]
  \notready
  \label{def:graph_walk_triple_set}
  \uses{} % n/a
  We define $\mathcal{G}_{k,k}$ to be the set of connected graphs $G$ with $\leq 2k$ vertices, 
  together with two paths each of length $k$ whose union covers $G$.
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-3-1 : def:index\_pair]
  \notready
  \label{def:index_pair}
  \uses{def:g_k_j,def:graph_walk_triple_set} 
  Given $(G,w,w') \in \mathcal{G}_{k,k}$, we say $(\mathbf{i},\mathbf{j})$ is an ordered pair of $k$-indexes generated by $(G,w,w')$ 
  if $\mathbf{i}$ and $\mathbf{j}$ are, repsectively, $k$-indexes generated by $w$ and $w'$ as in Definition \ref{def:g_k_j}.
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-3-2 : def:index\_pair\_rel]
  \notready
  \label{def:index_pair_rel}
  \uses{} % n/a
  Let $\mathbf{i}_\lambda$ and $\mathbf{j}_\lambda$ be $k$-indexes for each $\lambda=1,2$. We say $(\mathbf{i}_1,\mathbf{j}_1) = (\mathbf{i}_2,\mathbf{j}_2)$ if and only if there exists a bijection $\varphi_1$ from the set of entries $\mathbf{i}_1$ onto the set of entries $\mathbf{i}_2$, 
  and a bijection $\varphi_2$ from the set of entries $\mathbf{j}_1$ onto the set of entries $\mathbf{j}_2$ such that
  \begin{equation}
  \begin{split}
    \mathbf{i}_1 = (i_1,...,i_k) & \,\, \Longleftrightarrow \,\, \mathbf{i}_2 = \bigl( \varphi_1(i_1),\varphi_1(i_2),...,\varphi_1(i_k) \bigl)
  \end{split}
  \end{equation}
  and
  \begin{equation}
  \begin{split}
    \phantom{.}\mathbf{j}_1 = (j_1,...,j_k) & \,\, \Longleftrightarrow \,\, \mathbf{j}_2 = \bigl( \varphi_2(j_1),\varphi_2(j_2),...,\varphi_2(j_k) \bigl).
  \end{split}
  \end{equation}
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-3-3 : def:graph\_walk\_triple\_rel]
  \notready
  \label{def:graph_walk_triple_rel}
  \uses{def:graph_walk_triple_set,def:ordered_triple,def:index_pair,def:index_pair_rel}
  Let $(G_{\mathbf{i} \# \mathbf{j}},w_\mathbf{i},w_\mathbf{j})$ be an ordered triple generated by two $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, and let $(G,w,w') \in \mathcal{G}_{k,k}$.
  We say $(G_{\mathbf{i} \# \mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = (G,w,w')$ if and only $(\mathbf{i},\mathbf{j}) = (\mathbf{i}^*,\mathbf{j}^*)$,
  where $(\mathbf{i}^*,\mathbf{j}^*)$ is an ordered pair of $k$-indexes generated by $(G,w,w')$.
\end{definition}
%---------%
%---------%
\begin{lemma}[R-2-3-4 : lem:common\_val\_eq\_of\_index\_pair\_rel]
  \notready
  \label{lem:common_val_eq_of_index_pair_rel}
  \uses{def:index_pair_rel,def:matrix_multi_index,lem:eq_equiv_eq_expect}
  Let $\mathbf{i}_\lambda$ and $\mathbf{j}_\lambda$ be $k$-indexes for each $\lambda=1,2$ such that $(\mathbf{i}_1,\mathbf{j}_1) = (\mathbf{i}_2,\mathbf{j}_2)$.
  Then $\bE (Y_{\mathbf{i}_1}Y_{\mathbf{j}_1}) = \bE (Y_{\mathbf{i}_1}Y_{\mathbf{j}_2})$.
\end{lemma}
\begin{proof}
  This follows a similar reasoning as in Lemma \ref{lem:eq_equiv_eq_expect}.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-3-5 : lem:common\_val\_prod\_of\_eq\_of\_graph\_walk\_triple\_rel]
  \notready
  \label{lem:common_val_prod_eq_of_graph_walk_triple_rel}
  \uses{def:common_val_prod_of,def:ordered_triple,def:graph_walk_triple_rel,lem:eq_equiv_eq_expect,lem:common_val_eq_of_index_pair_rel}  
  Let $(G_{\mathbf{i}_1 \# \mathbf{j}_1},w_{\mathbf{i}_1},w_{\mathbf{j}_1})$ and $(G_{\mathbf{i}_2 \# \mathbf{j}_2},w_{\mathbf{i}_2},w_{\mathbf{j}_2})$ be ordered triples generated by their respective ordered pair of $k$-indexes, and $(G,w,w') \in \mathcal{G}_{k,k}$,
  If $(G_{\mathbf{i}_1 \# \mathbf{j}_1},w_{\mathbf{i}_1},w_{\mathbf{j}_2}) = (G,w,w')$ and $(G_{\mathbf{i}_1 \# \mathbf{j}_2},w_{\mathbf{i}_2},w_{\mathbf{j}_2}) = (G,w,w')$, then
%  If the ordered triples $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j})$ and $(G_{\mathbf{i}^*\#\mathbf{j}^*},w_{\mathbf{i}^*},w_{\mathbf{j}^*})$ are same up to relabeling, then
  \[
  \pi(G_{\mathbf{i}_1\#\mathbf{j}_1},w_{\mathbf{i}_1},w_{\mathbf{j}_1}) = \pi(G_{\mathbf{i}_2 \# \mathbf{j}_2},w_{\mathbf{i}_2},w_{\mathbf{j}_2}).
  \]
\end{lemma}
\begin{proof}
This follows from Lemma \ref{lem:eq_equiv_eq_expect}.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-4 : lem:sum\_eq\_sum\_over\_classes]
  \notready
  \label{lem:sum_eq_sum_over_classes}
  \uses{lem:variance_expansion,def:graph_walk_triple_rel}
  \[
  \text{Var} \biggl(\frac{1}{n} \Tr (\mathbf{X}_n^k) \biggl) 
  = \frac{1}{n^{k+2}} \sum_{(G,w,w') \in \mathcal{G}_{k,k}} \sum_{\substack{\mathbf{i},\mathbf{j} \in [n]^k \\ (G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = (G,w,w')}} [\mathbb{E}(Y_\mathbf{i} Y_\mathbf{j}) - \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j})].
  \]
\end{lemma}
\begin{proof}
  This follows from `partitioning' the summation appearing in Lemma \ref{lem:variance_expansion} using the equivalence relation defined in Definition \ref{def:graph_walk_triple_rel}.
% Given an ordered triple $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j})$ generated by two $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, and $(G,w,w') \in \mathcal{G}_{k,k}$, 
%  only one of $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = (G,w,w')$ or $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) \neq (G,w,w')$ holds. 
%  Hence, the partition of the summation is well-defined.
\end{proof}
%---------%
%---------%
\begin{definition}[R-2-5-1 : def:common\_val\_prod]
  \notready
  \label{def:common_val_prod}
  \uses{def:matrix_multi_index,def:graph_walk_triple_set,def:index_pair}
  Given $(G,w,w')$, let $(\mathbf{i},\mathbf{j})$ be an ordered pair of $k$-indexes generated by $w$ and $w'$. 
  We define
  \[
  \pi(G,w,w') = \mathbb{E}(Y_\mathbf{i} Y_\mathbf{j}) - \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}).
  \]
\end{definition}
%---------%
%---------%
\begin{lemma}[R-2-5-2 : lem:inner\_sum\_eq\_common\_val\_prod\_mul\_card]
  \notready
  \label{lem:inner_sum_eq_common_val_prod_mul_card}
  \uses{lem:sum_eq_sum_over_classes,def:common_val_prod,lem:common_val_prod_eq_of_graph_walk_triple_rel}
  \[
  \text{Var} \biggl(\frac{1}{n} \Tr (\mathbf{X}_n^k) \biggl) 
  = \frac{1}{n^{k+2}} \sum_{(G,w,w') \in \mathcal{G}_{k,k}} \pi(G,w,w')
\cdot \# \bigl\{ (\mathbf{i},\mathbf{j}) \in [n]^{2k} : (G_{\mathbf{i} \# \mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = (G,w,w') \bigl\}.
  \]
\end{lemma}
\begin{proof}
  This follows from re-indexing the sum of Lemma \ref{lem:sum_eq_sum_over_classes} using Lemma \ref{lem:common_val_prod_eq_of_graph_walk_triple_rel}.
\end{proof}
%---------%
%---------%
\begin{definition}[R-2-6-1 : def:def:graph\_walk\_triple\_single\_edges]
  \notready
  \label{def:graph_walk_triple_single_edges}
  \uses{def:graph_union}
  Given a graph $G_{\mathbf{i} \# \mathbf{j}}$, let $E^s_{\mathbf{i} \# \mathbf{j}}$ denote the set of self-edges.
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-6-2 : def:graph\_walk\_triple\_repeated\_edges]
  \notready
  \label{def:graph_walk_triple_repeated_edges} %connected
  \uses{def:graph_union}
  Given a graph $G_{\mathbf{i} \# \mathbf{j}}$, let $E^c_{\mathbf{i} \# \mathbf{j}}$ denote the set of connecting edges.
\end{definition}
%---------%
%---------%
\begin{definition}[R-2-7 : def:edgeCountPair]
  \notready
  \label{def:edgeCountPair}
  \uses{def:ordered_triple}
  Given a graph $G_{\mathbf{i} \# \mathbf{j}}$, 
  let $w_{\mathbf{i} \# \mathbf{j}}(e)$ denote the number of times the edge $e$ is traversed by either of the two paths $w_\mathbf{i}$ and $w_\mathbf{j}$.
\end{definition}
%---------%
%---------%
\begin{lemma}[R-2-8 : lem:expect\_mul\_eq\_prod\_expect\_edgewise\_of\_indep]
  \notready
  \label{lem:expect_mul_eq_prod_expect_edgewise_of_indep}
  \uses{def:edgeCountPair,lem:expectation_matrix_multi_index,def:graph_walk_triple_single_edges,def:graph_walk_triple_repeated_edges}
  \[
  \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) 
  = \prod_{e_s \in E^s_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j}}(e_c)}).
  \]
\end{lemma}
\begin{proof}
  This follows from Lemma \ref{lem:expectation_matrix_multi_index} and the independency of random variables.
\end{proof}
%---------%
%---------%
%\begin{lemma}[R-2-9 : lem:expect\_mul\_eq\_prod\_expect\_edgewise\_mul\_prod\_expect\_edgewise]
  \notready
  \label{lem:expect_mul_eq_prod_expect_edgewise_mul_prod_expect_edgewise}
  \uses{lem:expectation_matrix_multi_index}
  \[
  \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}) 
  = \prod_{e_s \in E^s_{\mathbf{i}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i}}(e_c)})
  \cdot \prod_{e_s \in E^s_{\mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{j}}(e_c)}).
  \]
%\end{lemma}
%\begin{proof}
%  This directly follows from Lemma \ref{lem:expectation_matrix_multi_index}.
%\end{proof}
%---------%
%---------%
%\egin{lemma}[R-2-10 : (Name unchanged since it might be merged)]
% \notready
% \label{lem:R-2-10}
% \uses{lem:expect_mul_eq_prod_expect_edgewise_of_indep,lem:expect_mul_eq_prod_expect_edgewise_mul_prod_expect_edgewise}
% \[
% \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) -  \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}) 
% = \prod_{e_s \in E^s_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j}}(e_c)})
% -  \prod_{e_s \in E^s_{\mathbf{i}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i}}(e_c)})
% \cdot \prod_{e_s \in E^s_{\mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{j}}(e_c)}).
% \]
%\end{lemma}
% begin{proof
% This follows from substituting the expressions derived in Lemma \ref{lem:expect_mul_eq_prod_expect_edgewise_of_indep} and Lemma \ref{lem:expect_mul_eq_prod_expect_edgewise_mul_prod_expect_edgewise}.
%\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-11 : lem:sum\_count\_edge\_pair\_eq\_length\_add\_length]
  \notready
  \label{lem:sum_count_edge_pair_eq_length_add_length} 
  \uses{def:edgeCountPair,def:graph_union,def:graph_multi_index,def:graph_edge_count}
  \[
  \sum_{e \in E_{\mathbf{i} \# \mathbf{j}}} w_{\mathbf{i} \# \mathbf{j}}(e) 
  = 2k 
  = \sum_{e \in E_\mathbf{i}} w_{\mathbf{i}}(e) + \sum_{e \in E_\mathbf{j}} w_{\mathbf{j}}(e).
  \]
\end{lemma}
\begin{proof}
  By construction of the paths $w_\mathbf{i}$ and $w_\mathbf{j}$,
  \[
  \sum_{e \in E_\mathbf{i}} w_{\mathbf{i}}(e) = k = \sum_{e \in E_\mathbf{j}} w_{\mathbf{j}}(e).
  \]
  By definition of the counting function $w_{\mathbf{i} \# \mathbf{j}}(\cdot)$,
  \[
  \sum_{e \in E_{\mathbf{i} \# \mathbf{j}}} w_{\mathbf{i} \# \mathbf{j}}(e)  
  = \sum_{e \in E_\mathbf{i}} w_{\mathbf{i}}(e) + \sum_{e \in E_\mathbf{j}} w_{\mathbf{j}}(e)
  = 2k.
  \]
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-12.1 : lem:expect\_pow\_edge\_count\_pair\_le] % CHANGE r_n to different index n.
  \notready
  \label{lem:expect_pow_edge_count_pair_le} 
  \uses{def:ordered_triple,def:edgeCountPair,lem:sum_count_edge_pair_eq_length_add_length}
  For any $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, there exists $n \in \mathbb{N}$ such that
  \[
  \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j} (e)}}) \leq r_n
  \]
  for every $e \in E_{\mathbf{i} \# \mathbf{j}}$.
\end{lemma}
\begin{proof}
  Let $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j})$ be the ordered triple generated by the two $k$-indexes $\mathbf{i}$ and $\mathbf{j}$. 
  By construction, there are finite number of edges $e \in E_{\mathbf{i} \# \mathbf{j}}$.
  Moreover, there are finite number of integer values the counting function $w_{\mathbf{i} \# \mathbf{j}}(\cdot)$ can take over $E_{\mathbf{i} \# \mathbf{j}}$.
  This implies we can choose the maximum element of the set
  \[
  \mathscr{E} := \{ \mathbb{E} (Y_{11}^\lambda) : \lambda = w_{\mathbf{i} \# \mathbf{j}}(e) \text{ for some } e \in E_{\mathbf{i} \# \mathbf{j}} \},
  \]
  and therefore $\lambda \in \mathbb{N}$ so that $\mathbb{E}(Y_{11}^\lambda) = \max \mathscr{E}$.
  Using the fact that $\mathbb{E}(Z) \leq \mathbb{E}(|Z|)$ for any random variable $Z$,
  \[
  \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j} (e)}}) \leq \max\{ \mathbb{E}(|Y_{11}^\lambda|), \mathbb{E}(|Y_{12}^\lambda|) \} = r_\lambda.
  \]
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-12.2 : lem:expect\_pow\_edge\_count\_pair\_le'] %CHANGE ' notation + CHANGE Dependency
  \notready
  \label{lem:expect_pow_edge_count_pair_le'}
  \uses{def:ordered_triple,def:edgeCountPair,lem:sum_count_edge_pair_eq_length_add_length}
  For any $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, there exists $m \in \mathbb{N}$ such that
  \[
  \mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j} (e)}}) \leq r_m
  \]
  for every $e \in E_{\mathbf{i} \# \mathbf{j}}$.
\end{lemma}
\begin{proof}
  This follows an identical reasoning as in Lemma \ref{lem:expect_pow_edge_count_pair_le}.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-13 : lem:expect\_mul\_le\_const]
  \notready
  \label{lem:expect_mul_le_const}
  \uses{lem:expect_mul_eq_prod_expect_edgewise_of_indep,lem:expect_pow_edge_count_pair_le,lem:expect_pow_edge_count_pair_le'}
  For any $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, there exists $M_1 \in \mathbb{R}$ such that
  \[
  \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) \leq M_1.
  \]
\end{lemma}
\begin{proof}
  By Lemma \ref{lem:expect_mul_eq_prod_expect_edgewise_of_indep}, we have
  \[
  \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) 
  = \prod_{e_s \in E^s_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j}}(e_c)}).
  \]
  By Lemma \ref{lem:expect_pow_edge_count_pair_le}, there exists $n \in \mathbb{N}$ so that $\mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j} (e)}}) \leq r_n$ for every $e \in E_{\mathbf{i} \# \mathbf{j}}$. 
  On the other hand, by Lemma \ref{lem:expect_pow_edge_count_pair_le'}, there exists $m \in \mathbb{N}$ so that $\mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j} (e)}}) \leq r_m$ for every $e \in E_{\mathbf{i} \# \mathbf{j}}$. 
  Then
  \[ \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) 
  = \prod_{e_s \in E^s_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{11}^{w_{\mathbf{i} \# \mathbf{j}}(e_s)}) \cdot \prod_{e_c \in E^c_{\mathbf{i} \# \mathbf{j}}} \mathbb{E} (Y_{12}^{w_{\mathbf{i} \# \mathbf{j}}(e_c)})
  \leq 2k \cdot \max\{r_n,r_m\}.
  \]
  Setting $M_1 := 2k \cdot \max\{r_n,r_m\}$ satisfies the problem.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-14 : lem:expect\_pow\_edge\_count\_le]
  \notready
  \label{lem:expect_pow_edge_count_le} 
  \uses{def:graph_edge_count,lem:abs_w_i_eq_k} 
  For any $k$-index $\mathbf{i}$, there exists $n \in \mathbb{N}$ such that
  \[
  \mathbb{E} (Y_{11}^{w_{\mathbf{i}}(e)}) \leq r_n.
  \]
  for every $e \in E_{\mathbf{i} \# \mathbf{j}}$.
\end{lemma}
\begin{proof}
  This follows a similar reasoning as in Lemma \ref{lem:expect_pow_edge_count_pair_le} with the counting function $w_\mathbf{i}(\cdot)$.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-15 : lem:expect\_pow\_edge\_count\_le']
  \notready
  \label{lem:expect_pow_edge_count_le'} 
  \uses{def:graph_edge_count,lem:abs_w_i_eq_k}
  For any $k$-index $\mathbf{i}$, there exists $n \in \mathbb{N}$ such that
  \[
  \mathbb{E} (Y_{12}^{w_{\mathbf{i}}(e)}) \leq r_n.
  \]
  for every $e \in E_\mathbf{i}$.
\end{lemma}
\begin{proof}
  This follows a similar reasoning as in Lemma \ref{lem:expect_pow_edge_count_pair_le} with the counting function $w_\mathbf{i}(\cdot)$.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-16 : lem:expect\_le\_const]
  \notready
  \label{lem:expect_le_const} 
  \uses{lem:expectation_matrix_multi_index,lem:expect_pow_edge_count_le,lem:expect_pow_edge_count_le'}
  For any $k$-indexes $\mathbf{i}$, there exists $M_2 \in \mathbb{R}$ such that
  \[
  \mathbb{E} (Y_\mathbf{i}) \leq M_2.
  \]
\end{lemma}
\begin{proof}
  This follows an identical reasoning as in Lemma \ref{lem:expect_pow_edge_count_pair_le}.
\end{proof}
%---------%
%---------%
\begin{lemma}[R-2-17 : lem:abs\_expect\_mul\_sub\_mul\_expect\_le]
  \notready
  \label{lem:abs_expect_mul_sub_mul_expect_le}
  \uses{lem:expect_mul_le_const,lem:expect_le_const}
  For any $k$-indexes $\mathbf{i}$ and $\mathbf{j}$, there exists $M_{2k} \in \mathbb{R}_{\geq 0}$ such that
  \[
  | \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) -  \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}) |
  \leq 2 M_{2k}.
  \] 
\end{lemma}
\begin{proof}
  Combining the result of Lemma \ref{lem:expect_mul_le_const} and Lemma \ref{lem:expect_le_const} gives
  \[
  | \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) -  \mathbb{E}(Y_\mathbf{i}) \mathbb{E}(Y_\mathbf{j}) |
  \leq | \mathbb{E} (Y_\mathbf{i}Y_\mathbf{j}) | + | \mathbb{E}(Y_\mathbf{i})| | \mathbb{E}(Y_\mathbf{j}) |
  \leq M_1 + M_2^{(\mathbf{i})} \cdot M_2^{(\mathbf{j})},
  \]
  where $M_2^{(\mathbf{i})}$ and $M_2^{(\mathbf{j})}$ are the upper bounds acquired by Lemma \ref{???} with repsect to $\mathbf{i}$ and $\mathbf{j}$, repsectively. 
  Setting $M_{2k} := \max\{ M_1, M_2^{(\mathbf{i})} \cdot M_2^{(\mathbf{j})} \}$ satisfies the problem.
\end{proof}
%---------%
%---------%
%---Richard's Part for Proposition 4.5 (End)---% 




%---Kiran's Part for Proposition 4.5 (Start)---% 
%---------%
%---------%

\begin{definition}[R-2-2 : def:graph\_walk\_triple\_set]
  \notready
  \label{def:graph_walk_triple_set_w_ge_two}
  \uses{def:graph_walk_triple_set} % n/a
  $(G,w,w')\in \mathcal{G}_{k,k,w+w'\ge 2}$ if $(G,w,w') \in \mathcal{G}_{k,k}$ and $w + w' \ge 2$.
\end{definition}


\begin{proposition}
  \label{prop:var_trace_as_sum}
  \notready
  \uses{lem:inner_sum_eq_common_val_prod_mul_card}
  \[ \Var\left( \frac1n\Tr(X_n^k)\right) = \sum_{(G,w,w')\in \mathcal{G}_{k,k}\atop w+w'\ge 2} \pi(G,w,w')\cdot\frac{\#\left\{(i,{j})\in [n]^{2k}\colon (G_{i\#j},w_{i},w_{j}) = (G,w,w')\right\}}{n^{k+2}}. \]
\end{proposition}

\begin{proof}
  \notready
  By construction, every edge in the joined graph $G_{{i}\#{j}}$ is traversed at least once by the union of the two paths $w_{i}$ and $w_{j}$.  Suppose that $e$ is an edge that is traversed only {\em once}.  This means that $w_{{i}\#{j}}(e) = 1$, and so it follows that the two values $w_{i}(e),w_{j}(e)$ are $\{0,1\}$.  Hence, the above expansion and the fact that $\bE(Y_{11})=\bE(Y_{12})=0$ show that $\pi(G_{{i}\#{j}},w_{i},w_{j}) = 0$ in this case.
\end{proof}

\begin{proposition}
  \label{lem:g_w_w_count}
  \notready
  \uses{def:index_pair_rel, def:graph_walk_triple_set_w_ge_two, def:graph_walk_triple_rel}
  For $(G, w, w') \in \mathcal{G}_{k,k,w+w'\ge 2}$, $\#\left\{(i,{j})\in [n]^{2k}\colon (G_{i\#j},w_{i},w_{j}) = (G,w,w')\right\} = n(n-1)\cdots (n-|G|+1)$.
\end{proposition}

\begin{proof}
  \notready
  The enumeration of the number of $2k$-tuples yielding a certain graph with two walks is the same as in the previous proposition: the structure $(G,w,w')$ specifies the $2k$-tuple precisely once we select the $|G|$ distinct indices for the vertices.  So, as before, this ratio becomes \[ \frac{n(n-1)\cdots (n-|G|+1)}{n^{k+2}}. \]
\end{proof}


\begin{lemma}
  \label{lem:simplified_var_trace_as_sum}
  \uses{prop:var_trace_as_sum, lem:g_w_w_count}
  \notready
  \[ \Var\left( \frac1n\Tr({X}_n^k)\right) = \sum_{(G,w,w')\in \mathcal{G}_{k,k}\atop w+w'\ge 2} \pi(G,w,w')\cdot\frac{n(n-1)\cdots (n-|G|+1)}{n^{k+2}}. \]
\end{lemma}

\begin{proof}
  \notready
  Follows directly.
\end{proof}

\begin{lemma}
  \label{lem:g_k_k_edge_count_maximum}
  \uses{def:graph_walk_triple_set_w_ge_two}
  \notready

  In the set $\mathcal{G}_{k,k,w+w'\ge 2}$, edge count is at most $k$.
\end{lemma}

\begin{proof}
  \notready
  Now, we have the condition $w+w'\ge 2$, meaning every edge is traversed at least twice.  Since there are $k$ steps in each of the two paths, this means there are at most $k$ edges.
\end{proof}

\begin{proposition}
  \label{prop:var_upper_bound}
  \uses{prop:vertex_edge_inequality, lem:simplified_var_trace_as_sum, lem:abs_expect_mul_sub_mul_expect_le, lem:g_k_k_edge_count_maximum, def:common_val_prod}
  \notready
  \[ \Var\left( \frac1n\Tr({X}_n^k)\right) \le \sum_{(G,w,w')\in\mathcal{G}_{k,k}\atop w+w'\ge 2} \pi(G,w,w')\cdot \frac{n^{k+1}}{n^{k+2}} \le \frac1n\cdot 2M_{2k}\cdot \#\mathcal{G}_{k,k}. \]
\end{proposition}

\begin{proof}
  \notready
  Appealing again to \ref{prop:vertex_edge_inequality}, it follows that $|G|\le k+1$.  Hence, $n(n-1)\cdots(n-|G|+1) \le n^{|G|} \le n^{k+1}$
\end{proof}

\begin{theorem}
  \label{thm:wigner_law_matrix_moments}
  \uses{prop:var_upper_bound}
  \notready
  Theorem 2.4. (Unsure if it goes in this doc.)
\end{theorem}

\begin{proof}
  \notready
  The (potentially enormous) number $B_k=2M_{2k}\cdot\#\mathcal{G}_{k,k}$ is independent of $n$, and so we have already proved that the variance is $=O_k(1/n)$.
\end{proof}


%---------%
%---------%
%---Kiran's Part for Proposition 4.5 (End)---% 




%---Haoyan's Part for Proposition 4.5 (Start)---% 
%---------%
%---------%

\begin{lemma}
    \label{lem:exactly_k_edges}
    \uses{prop:vertex_edge_inequality}  
    \notready
    $G \in \mathcal{G}_{k, k}$. If $|G| = k + 1$, then $G$ has exactly $k$ edges.
\end{lemma}


\begin{lemma}
    \label{lem:G_is_tree}
    \uses{prop:vertex_edge_tree_equality}
    \notready
    $G \in \mathcal{G}_{k, k}$. If $|G| = k + 1$, then $G \in \mathcal{G}_{k, k}$ is a tree.
\end{lemma}


\begin{lemma}
    \label{lem:subgraph_of_tree}
    \uses{lem:G_is_tree, def:graph_union, lem:special_g_tree}
    \notready
    $G_{\mathbf{i} \# \mathbf{j}}$ is a tree, then its subgraph $G_{\mathbf{i}}$ and $G_{\mathbf{j}}$ are also trees.
\end{lemma}


\begin{lemma}
    \label{lem:traverse_exactly_twice}
    \notready
    \uses{lem:exactly_k_edges}     % also depends on  total length of walk i, j is exactly 2k
    $(G, w, w') \in \mathcal{G}_{k, k}$. If $|G| = k + 1$, then for a common edge $e$ between the two walks, $w(e) + w'(e) =2$. In other words, every edge is traversed exactly twice.
    \begin{proof}
        Assume for contradiction there is one edge $l$ such that $w(l) + w'(l) > 2$, then $\sum_{e \in G} w(e) + w'(e) > 2k$.
    \end{proof}
\end{lemma}


%maybe require the statement that they are closed walks
\begin{lemma}
    \label{lem:i_j_traverse_once}
    \notready
    \uses{lem:traverse_exactly_twice, lem:subgraph_of_tree}
     $(G, w, w') \in \mathcal{G}_{k, k}$ and $|G| = k + 1$, then for a common edge it is impossible that $w(e) = w'(e) = 1$.
     \begin{proof}
       Each walk is a closed walk, which implies their edge needs to be traversed in even number.
     \end{proof}
\end{lemma}


\begin{lemma}
    \label{lem:one_walk_traverse_twice}
    \notready
    \uses{lem:i_j_traverse_once}
     $(G, w, w') \in \mathcal{G}_{k, k}$ and $|G| = k + 1$, then it can only be the case that $w(e) = 2, w'(e) = 0$, or $w(e) = 0, w'(e) = 2$ .
     \begin{proof}
      As a common edge, it is impossible that $w'$ does not traverse it.
     \end{proof}
\end{lemma}



\begin{lemma}
    \label{lem:no_shared_edges}
    \uses{lem:one_walk_traverse_twice}
    $(G, w, w') \in \mathcal{G}_{k, k}$ and $|G| = k + 1$. Then two walks have no shared edges $e$ which they have traversed.
\end{lemma}


\begin{lemma}
    \label{lem:disjoint_edge_set}
    \notready
    \uses{lem:no_shared_edges}
    The only graph walks $(G,w,w')\in \mathcal{G}_{k,k}$ with $|G|=k+1$ must have the edge sets covered by $w$ and $w'$ distinct.  
    In other words, if $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = (G,w,w')$, then the edge sets do not intersect: 
    $\{\{i_1,i_2\},\ldots,\{i_k,i_1\}\}\cap\{\{j_1,j_2\},\ldots,\{j_k,j_1\}\}=\emptyset$. 
\end{lemma}



%depends on the definition of \mathcal{G}_{k,k} and \pi(G, w, w'    %R-2-5-1)
\begin{lemma}
    \label{lem:G_leq_k}
    \notready
    \uses{lem:disjoint_edge_set, def:common_val_prod}  
    For any $(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) \in \mathcal{G}_{k,k}$, with $k + 1$ vertices, $\pi(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j})  = 0$ 
    \begin{proof}
     $\pi(G_{\mathbf{i}\#\mathbf{j}},w_\mathbf{i},w_\mathbf{j}) = \mathbb{E}(X_{\mathbf{i}}X_{\mathbf{j}}) - \mathbb{E}(X_{\mathbf{i}})\mathbb{E}(X_{\mathbf{j}})  = 0$
    \end{proof}
\end{lemma}


%depends on the previous inequality showing variance bounded by O(1/n)
% this is the only statement from my part being depended by the Prop 4.5
\begin{lemma}
    \label{lem:elimination_kp1}
    \notready
    \uses{lem:G_leq_k, prop:var_upper_bound}

    \[ \Var\left( \frac1n\Tr(\mathbf{X}_n^k)\right) \le \sum_{(G,w,w')\in\mathcal{G}_{k,k}\atop w+w'\ge 2, |G| \leq k} \pi(G,w,w')\cdot \frac{n^{k}}{n^{k+2}} \le \frac{1}{n^2}\cdot 2M_{2k}\cdot \#\mathcal{G}_{k,k}. \]
\end{lemma}

%---------%
%---------%
%---Haoyan's Part for Proposition 4.5 (End)---% 



\begin{proposition}[Proposition 4.2 in \cite{Kemp2013RMTNotes}]
  \label{prop:matrix_moments_convergence_probability}
  \uses{lem:elimination_kp1}
  \notready
  Let $\{Y_{ij}\}_{1 \leq i \leq j}$ be independent random variables, with $\{Y_{ii}\}_{i\geq 1}$ identically distributed and $\{Y_{ij}\}_{1 \leq i < j}$ identically distributed. Suppose that $r_k = \max\{\bE(|Y_{11}|^k),\bE(|Y_{12}|^k)\} < \infty$ for each $k\in\bN$. Suppose further than $\bE(Y_{ij})=0$ for all $i,j$. If $i>j$, define $Y_{ij} \equiv Y_{ji}$, and let $\mathbf{Y}_n$ be the $n\times n$ matrix with $[\mathbf{Y}_n]_{ij} = Y_{ij}$ for $1\le i,j\le n$. Let $\mathbf{X}_n = n^{-1/2}\mathbf{Y}_n$ be the corresponding Wigner matrix. Then
  $$
  \operatorname{Var}(\frac{1}{n}\Tr(\mathbf{X}_{n}^{k})) = O_{k}(\frac{1}{n^2})
  $$ 
\end{proposition}
